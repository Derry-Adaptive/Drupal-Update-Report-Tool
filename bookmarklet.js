javascript:(()=>{console.log("ðŸš€ Drupal Update Report Tool (v5.0) initialized.");let s=["Name","Status","Installed","Recommended"],c=window._excludedModules||new Set;function r(){var e=new Date;return String(e.getDate()).padStart(2,"0")+`/${String(e.getMonth()+1).padStart(2,"0")}/`+e.getFullYear()}window._excludedModules=c;var e=(e=(document.querySelector(".update-status")?.innerText||"").match(/Drupal\s+(\d+\.\d+\.\d+)/i))?e[1]:"0.0.0";function o(e){return e=String(e).replace(/"/g,'""'),/["\n\r,]/.test(e)?`"${e}"`:e}console.log("Current Core Version: ",e),window.generateUpdateReport=function(e="help"){if("help"!==e&&e)if("add_exclude"===e)c.add(arguments[1].toLowerCase()),console.log("ðŸ›‘ Excluded: "+arguments[1]);else if("remove_exclude"===e)c.delete(arguments[1].toLowerCase()),console.log("âœ… Removed from exclude: "+arguments[1]);else if("exclude_list"===e)console.log([...c].sort().join("\n")||"No exclusions");else{var n=(()=>{let d=[];return document.querySelectorAll("table.update tbody tr").forEach(e=>{var t=e.querySelector(".project-update__title a"),o=t?.innerText.trim()||"N/A",t=(t?.href||"").match(/project\/([^\/]+)/),t=t?t[1]:o.toLowerCase().replace(/\s+/g,"_"),r=e.querySelector(".project-update__title")?.innerText.replace(o,"").trim()||"N/A",n=e.querySelector(".project-update__version--recommended a")?.innerText.trim()||"N/A",a=e.querySelector(".project-update__status span")?.innerText||"",l=e.querySelector(".project-update__compatibility-details")?.innerText||"";let s="update";/up to date/i.test(a)?s="current":/security update required/i.test(a)?s="security":/not supported/i.test(a)&&(a=e.querySelector(".project-update__compatibility-details .compatible"),s=a?"updatable":"unsupported"),c.has(t.toLowerCase())||d.push({name:o,machine:t,status:s,installed:r,recommended:n,compatibilityText:l})}),d})().filter(e=>"current"!==e.status);if(!n.length)return console.log("âœ… No updates found.");if("ascii"===e){var a=n;let r=s.map(t=>Math.max(t.length,...a.map(e=>(e[t.toLowerCase()]||"").length)));var l=t=>"+"+r.map(e=>t.repeat(e+2)).join("+")+"+";let t=o=>"| "+s.map((e,t)=>(o[e.toLowerCase()]||"").padEnd(r[t])).join(" | ")+" |",o=[];o.push(l("-")),o.push(t(Object.fromEntries(s.map(e=>[e.toLowerCase(),e])))),o.push(l("=")),a.forEach(e=>o.push(t(e))),o.push(l("-")),console.log("```\n"+o.join("\n")+"\n```")}else if("commit"===e){l=n;let e="Drupal updates - "+r(),o={core:[],modules:[],themes:[]};l.forEach(e=>{var t;"current"!==e.status&&"unsupported"!==e.status&&(t="update"!==e.status?` [${e.status}]`:"",t=e.name+t+` (${e.installed} â†’ ${e.recommended})`,(e.name.toLowerCase().includes("core")?o.core:e.name.toLowerCase().includes("theme")?o.themes:o.modules).push(t))}),o.core.length&&(e+="\n\nCore updates:\n- "+o.core.join("\n- ")),o.modules.length&&(e+="\n\nModule updates:\n- "+o.modules.join("\n- ")),o.themes.length&&(e+="\n\nTheme updates:\n- "+o.themes.join("\n- ")),console.log(e)}else if("composer"===e){var t=n;let o=[];t.forEach(e=>{var t;["unsupported","current"].includes(e.status)||(t=e.recommended.replace(/^8\.x-/,""),e.name.toLowerCase().includes("core")?(o.push("drupal/core-recommended:^"+t),o.push("drupal/core-composer-scaffold:^"+t),o.push("drupal/core-project-message:^"+t),o.push("drupal/core:^"+t)):o.push(`drupal/${e.machine}:^`+t))}),o.length?console.log("composer require -W "+o.join(" ")):console.log("âœ… No composer updates required.")}else"json"===e?console.log(JSON.stringify(n,null,2)):"csv"===e?(t=n,t=[s,...t.map(e=>[e.name,e.status,e.installed,e.recommended])].map(e=>e.map(o).join(",")).join("\n"),t=new Blob([t],{type:"text/csv"}),e=`drupal_updates_${window.location.hostname}_${r().replace(/\//g,"-")}.csv`,(n=document.createElement("a")).href=URL.createObjectURL(t),n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)):console.log("Unknown type.")}else console.log('âœ… "generateUpdateReport" is ready to use'),console.log("ðŸ“¦ REPORT OUTPUT OPTIONS:\n"),console.log('ðŸ”¹ generateUpdateReport("ascii"); â†’ Display updates in an ASCII table'),console.log('ðŸ”¹ generateUpdateReport("commit"); â†’ Generate commit message'),console.log('ðŸ”¹ generateUpdateReport("json"); â†’ Output updates as JSON'),console.log('ðŸ”¹ generateUpdateReport("composer"); â†’ Generate composer require command'),console.log('ðŸ”¹ generateUpdateReport("csv"); â†’ Export CSV of updates'),console.log("\nðŸ§° EXCLUDE OPTIONS:\n"),console.log('ðŸ”¹ generateUpdateReport("add_exclude", "module_name"); â†’ Add a module to the exclude list'),console.log('ðŸ”¹ generateUpdateReport("remove_exclude", "module_name"); â†’ Remove a module from')},generateUpdateReport("help")})();