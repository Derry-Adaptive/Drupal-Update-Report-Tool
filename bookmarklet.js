javascript:(()=>{console.log("üöÄ Initializing Drupal Update Report Tool (v4.2)...");let s=["Name","Site Version","Recommended Version","Status","Required Core Version"],c=[],i=!1;function u(e){return{Name:e.humanName,"Site Version":e.installedVersion,"Recommended Version":e.recommendedVersion,Status:e.status,"Required Core Version":e.requiredCoreVersion||""}}window.generateUpdateReport=function(t,e=0,r=["update","security","unsupported"]){if("help"===t)console.log("‚úÖ Drupal Update Report Tool (v4.2)"),console.log(""),console.log("Usage:"),console.log("generateUpdateReport(type, name, scope);"),console.log(""),console.log("Available Types:"),console.log("- csv        ‚ûú CSV report"),console.log("- ascii      ‚ûú ASCII table report"),console.log("- json       ‚ûú JSON formatted output"),console.log("- composer   ‚ûú Composer require commands (auto-excludes incompatible updates)"),console.log("- commit     ‚ûú Git commit message generator (structured by Core, Modules, Themes)"),console.log("- pantheon   ‚ûú Pantheon URL generator"),console.log("- add_exclude / remove_exclude / exclude_list ‚ûú Manage exclusion list"),console.log(""),console.log("Scopes:"),console.log("- all             ‚ûú All modules/themes/core, including up-to-date"),console.log("- updates         ‚ûú Only items needing updates (default behavior prior to v4.2)"),console.log("- security        ‚ûú Security updates only"),console.log("- unsupported     ‚ûú Unsupported updates only"),console.log("- update available‚ûú Regular available updates (excluding security/unsupported)"),console.log(""),console.log("Report Columns:"),console.log('"'+s.join('", "')+'"'),console.log(""),console.log("Notes:"),console.log("- Composer & commit commands operate only on updates."),console.log("- Core-aware logic ensures safe compatibility filtering.");else{i=!1;var l=(()=>{if(i)console.log("‚úÖ Data already fetched.");else{console.log("Fetching update data from the page...");var e=document.querySelectorAll(".update");let u=[];e.forEach((e,i)=>{e.querySelectorAll("tbody tr").forEach((e,o)=>{var t=e.querySelector(".project-update__title a"),r=e.querySelector(".project-update__title"),l=e.querySelector(".project-update__version--recommended"),n=e.querySelector(".project-update__release-notes-link a"),a=e.querySelector(".project-update__status span"),e=e.querySelector(".project-update__compatibility-details .claro-details__wrapper"),t=t?t.textContent.trim():"N/A",r=r?r.textContent.replace(t,"").trim():"N/A",l=l?l.querySelector("a").textContent.trim():"N/A",n=n?n.href:"N/A",a=a?a.textContent.trim():"N/A",e=e?e.textContent.replace("Requires Drupal core:","").trim():"N/A";let s="current",c="";a.includes("Update available")?s="update":a.includes("Security update required")?(s="security",c="(Security Update)"):a.includes("Unsupported update")&&(s="unsupported");a={tableIndex:i+1,rowIndex:o+1,humanName:t,installedVersion:r,recommendedVersion:l,releaseNotes:n,status:s+c,requiredCoreVersion:e};u.push(a)})}),c=u,i=!0}return c})(),n=(r=Array.isArray(r)?r.map(e=>e.trim()):[r.trim()],[]);let o=new Set(n),e=[];if(e=Array.isArray(r)?l.filter(e=>r.includes(e.status)):l.filter(e=>r===e.status),0===(e=(e=0<n.length?e.filter(e=>!o.has(e.humanName)):e).filter(function(e){return"current"!==e.status})).length)console.log("‚úÖ No modules match the specified criteria.");else{var a=e.map(u);switch(t.toLowerCase()){case"commit":console.log((e=>{let o=(new Date).toISOString().split("T")[0],t=`
Update Drupal modules (${o})`,r=[],l=[],n=[];return e.forEach(e=>{(e.Name.toLowerCase().includes("core")?r:e.Name.toLowerCase().includes("theme")?n:l).push(e)}),0<r.length&&(t+=`

Core updates:`,r.forEach(e=>{t+=`
${e.Name} (${e["Site Version"]} ‚Üí ${e["Recommended Version"]})`})),0<l.length&&(t+=`

Module updates:`,l.forEach(e=>{t+=`
${e.Name} (${e["Site Version"]} ‚Üí ${e["Recommended Version"]})`})),0<n.length&&(t+=`

Theme updates:`,n.forEach(e=>{t+=`
${e.Name} (${e["Site Version"]} ‚Üí ${e["Recommended Version"]})`})),t})(a));break;case"csv":console.log((e=>{let o='\n"'+s.join('","')+'"';return e.forEach(e=>{o+=`
"${e.Name}","${e["Site Version"]}","${e["Recommended Version"]}","${e.Status}","${e["Required Core Version"]}"`}),o})(a));break;case"ascii":console.log((e=>{let r="+",l=s.map(o=>Math.max(...e.map(e=>e[o].length),o.length));return r=r+(l.map((e,o)=>"-".repeat(e+2)+"+").join("")+"\n")+"|",s.forEach((e,o)=>{r+=` ${e.padEnd(l[o])} |`}),r+="\n+",l.forEach(e=>{r+="-".repeat(e+2)+"+"}),r+="\n",e.forEach(t=>{r+="|",s.forEach((e,o)=>{r+=` ${t[e].padEnd(l[o])} |`}),r+="\n"}),r+="+",l.forEach(e=>{r+="-".repeat(e+2)+"+"}),r+="\n"})(a));break;case"json":console.log(JSON.stringify(a,null,2));break;default:console.log("‚ùì Unknown report type: '"+t+"'")}}}}})();