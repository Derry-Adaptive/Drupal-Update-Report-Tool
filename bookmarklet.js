javascript:(()=>{var e;console.log("ðŸš€ Drupal Update Report Tool (v5.0) initialized.");let s=["Name","Status","Installed","Recommended"],d=window._excludedModules||new Set;function u(e,o){var t=e.split(".").map(Number),r=o.split(".").map(Number);for(let e=0;e<Math.max(t.length,r.length);e++){var n=t[e]||0,l=r[e]||0;if(l<n)return 1;if(n<l)return-1}return 0}window._excludedModules=d;let c=(e=(document.querySelector("table.update tbody tr")?.querySelector(".project-update__title")?.innerText||"").match(/Drupal\s+(\d+\.\d+\.\d+)/i))?e[1]:"0.0.0";function o(e){let o="Drupal updates - "+(new Date).toISOString().split("T")[0],t={core:[],modules:[],themes:[]};e.forEach(e=>{var o="update"!==e.status?` [${e.status}]`:"",o=e.name+o+` (${e.installed} â†’ ${e.recommended})`;(e.name.toLowerCase().includes("core")?t.core:e.name.toLowerCase().includes("theme")?t.themes:t.modules).push(o)}),t.core.length&&(o+="\n\nCore updates:\n- "+t.core.join("\n- ")),t.modules.length&&(o+="\n\nModule updates:\n- "+t.modules.join("\n- ")),t.themes.length&&(o+="\n\nTheme updates:\n- "+t.themes.join("\n- ")),console.log(o)}console.log("Current Core Version: ",c),window.generateUpdateReport=function(e="help"){if("help"!==e&&e)if("add_exclude"===e)d.add(arguments[1].toLowerCase()),console.log("ðŸ›‘ Excluded: "+arguments[1]);else if("remove_exclude"===e)d.delete(arguments[1].toLowerCase()),console.log("âœ… Removed from exclude: "+arguments[1]);else if("exclude_list"===e)console.log([...d].sort().join("\n")||"No exclusions");else{var n=(()=>{let s=[];return document.querySelectorAll("table.update tbody tr").forEach(e=>{var o=e.querySelector(".project-update__title a"),t=o?.innerText.trim()||"N/A",o=(o?.href||"").match(/project\/([^\/]+)/),o=o?o[1]:t.toLowerCase().replace(/\s+/g,"_"),r=e.querySelector(".project-update__title")?.innerText.replace(t,"").trim()||"N/A",n=e.querySelector(".project-update__version--recommended a")?.innerText.trim()||"N/A",l=e.querySelector(".project-update__status span")?.innerText||"",e=e.querySelector(".project-update__compatibility-details")?.innerText||"";let a="update";/up to date/i.test(l)?a="current":/security update required/i.test(l)?a="security":/not supported/i.test(l)&&(a=r===n||(l=e.match(/Requires Drupal core:\s*([\d\.]+)\s*to\s*([\d\.]+)/i))&&(e=l[1],l=l[2],0<=u(c,e))&&u(c,l)<=0?"updatable":"unsupported"),d.has(o.toLowerCase())||s.push({name:t,machine:o,status:a,installed:r,recommended:n})}),s})().filter(e=>"current"!==e.status);if(!n.length)return console.log("âœ… No updates found.");if("ascii"===e){var l=n;let r=s.map(o=>Math.max(o.length,...l.map(e=>(e[o.toLowerCase()]||"").length)));var a=o=>"+"+r.map(e=>o.repeat(e+2)).join("+")+"+";let o=t=>"| "+s.map((e,o)=>(t[e.toLowerCase()]||"").padEnd(r[o])).join(" | ")+" |",t=[];t.push(a("-")),t.push(o(Object.fromEntries(s.map(e=>[e.toLowerCase(),e])))),t.push(a("=")),l.forEach(e=>t.push(o(e))),t.push(a("-")),console.log("```\n"+t.join("\n")+"\n```")}else if("commit"===e)o(n);else if("composer"===e){a=n;let o=[];a.forEach(e=>{["unsupported","current"].includes(e.status)||(e.name.toLowerCase().includes("core")?(o.push("drupal/core-recommended:^"+e.recommended),o.push("drupal/core-composer-scaffold:^"+e.recommended),o.push("drupal/core-project-message:^"+e.recommended),o.push("drupal/core:^"+e.recommended)):o.push(`drupal/${e.machine}:^`+e.recommended))}),o.length?console.log("composer require -W "+o.join(" ")):console.log("âœ… No composer updates required.")}else"json"===e?console.log(JSON.stringify(n,null,2)):console.log("Unknown type.")}else console.log('âœ… "generateUpdateReport" is ready to use'),console.log("ðŸ“¦ REPORT OUTPUT OPTIONS:\n"),console.log('ðŸ”¹ generateUpdateReport("ascii"); â†’ Display updates in an ASCII table'),console.log('ðŸ”¹ generateUpdateReport("commit"); â†’ Generate commit message'),console.log('ðŸ”¹ generateUpdateReport("json"); â†’ Output updates as JSON'),console.log('ðŸ”¹ generateUpdateReport("composer"); â†’ Generate composer require command'),console.log("\nðŸ§° EXCLUDE OPTIONS:\n"),console.log('ðŸ”¹ generateUpdateReport("add_exclude", "module_name"); â†’ Add a module to the exclude list'),console.log('ðŸ”¹ generateUpdateReport("remove_exclude", "module_name"); â†’ Remove a module from')},generateUpdateReport("help")})();